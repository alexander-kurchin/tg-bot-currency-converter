> Простой Telegram бот-конвертер валют

## Содержание

1. [Как создать бота?](#Как-создать-бота)
1. [Добавляем токен в .env](#Добавляем-токен-в-env)
1. [API для конвертации валют](#API-для-конвертации-валют)
1. [Размещаем код на сервере](#Размещаем-код-на-сервере)

## Как создать бота?

Для того чтобы создать бота, вам необходимо написать боту *[@BotFather](https://t.me/botfather)* и выполнить несколько простых шагов.

Используйте команду ***/newbot***, чтобы создать нового бота.

Затем необходимо:

1. **Установить имя (*name*) вашего бота.**  
    Имя вашего бота отображается в контактной информации и в других местах.
2. **Установить имя пользователя (*username*) вашего бота.**  
    Имя пользователя — это короткое имя, которое будет использоваться для идентификации вашего бота и обращения к нему. Имена пользователей состоят из 5–32 символов и нечувствительны к регистру, могут включать только латинские символы, числа и символы подчёркивания. Имя пользователя вашего бота должно заканчиваться на **«*bot*»**, например, «*tetris_bot*» или «_TetrisBot_».
3. **Получить токен (*token*).**  
    Токен представляет собой строку вида *110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw*. Он необходим для авторизации  вашей программы, в которой реализована логика бота.

## Добавляем токен в .env

Токен — это пароль от вашего бота, поэтому храните свой токен в безопасности. Чтобы моя программа корректно работала у вас, отредактируйте файл `.env`:

Поместите ваш токен внутри кавычек:

```
TOKEN="Токен, полученный при регистрации"
```

Должно получиться что-то вроде:

```
TOKEN="110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw"
```

## API для конвертации валют
Я использовал сервис [Exchange rates API](https://exchangerate.host/), так как он бесплатный и не требует регистрации.

Использование:

1. в ответ на запрос `https://api.exchangerate.host/convert?from=RUB&to=EUR&amount=1`
2. получаем json

``` json
{
  "motd": {"msg": "If you or your company use this project or like what we doing, please consider backing us so we can continue maintaining and evolving this project.",
           "url": "https://exchangerate.host/#/donate"
           },
  "success": true,
  "query": {"from": "RUB",
            "to": "EUR",
            "amount": 1
            },
  "info": {"rate": 0.009172
           },
  "historical": false,
  "date": "2023-08-14",
  "result": 0.009172
}
```

3. из которого нам нужно значение *"result"*

## Размещаем код на сервере

![Схема взаимодействия пользователей, сервера tg и бота](https://optima740.github.io/image/post-2020-09-18/how_it_works.png)

Бота можно запустить прямо на своём компьютере, это удобно для тестирования во время разработки. Но готовый код лучше запустить на сервере.

Я использовал бесплатный тариф в облачной платформе [*Python*Anywhere](https://www.pythonanywhere.com/).

Загружаете файлы `main.py extensions.py currencies.py .env requirements.txt` на сервер.

Запускаете консоль, и сначала устанавливаете зависимости `pip install -r /home/<ваш_username>/requirements.txt`, а затем запускаете саму программу `python /home/<ваш_username>/main.py`.

Вуаля.
